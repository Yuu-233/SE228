<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
    <constant name="struts.i18n.encoding" value="UTF-8"/>
    <constant name="struts.objectFactory" value="spring" />
    <constant name="struts.devMode" value="true" />
    <constant name="struts.convention.classes.reload" value="true" />

    <package name="index" extends="struts-default">
        <action name="index" class="bookstore.action.showBookAtIndex">
            <result>/WEB-INF/index.jsp</result>
        </action>
        <action name="signUp" class="bookstore.action.auth.SignUpAction">
            <result name="error">/WEB-INF/index.jsp?signup=error</result>
            <result name="success">/WEB-INF/index.jsp</result>
            <exception-mapping exception="org.springframework.dao.DataIntegrityViolationException" result="error"/>
        </action>
    </package>

    <package name="admin" namespace="/admin" extends="json-default">
        <action name="admin">
            <result>/WEB-INF/admin/admin.jsp</result>
        </action>
        <!-- User -->
        <action name="user" class="bookstore.action.user.ListUserAction">
            <result name="success">/WEB-INF/admin/user.jsp</result>
        </action>
        <action name="addUser" class="bookstore.action.user.AddUserAction">
            <result name="success">/WEB-INF/admin/user.jsp</result>
        </action>
        <action name="updateUser" class="bookstore.action.user.UpdateUserAction">
            <result name="success">/WEB-INF/admin/user.jsp</result>
        </action>
        <action name="deleteUser" class="bookstore.action.user.DeleteUserAction">
            <result name="success">/WEB-INF/admin/user.jsp</result>
        </action>

        <!-- Book -->
        <action name="book" class="bookstore.action.book.ListBookAction">
            <result name="success">/WEB-INF/admin/book.jsp</result>
        </action>
        <action name="addBook" class="bookstore.action.book.AddBookAction">
            <result name="success">/WEB-INF/admin/book.jsp</result>
        </action>
        <action name="updateBook" class="bookstore.action.book.UpdateBookAction">
            <result name="success">/WEB-INF/admin/book.jsp</result>
        </action>
        <action name="deleteBook" class="bookstore.action.book.DeleteBookAction">
            <result name="success">/WEB-INF/admin/book.jsp</result>
        </action>

        <!-- Order -->
        <action name="order" class="bookstore.action.order.ListOrderAction">
            <result name="success">/WEB-INF/admin/order.jsp</result>
        </action>
        <action name="addOrder" class="bookstore.action.order.AddOrderAction">
            <result name="success">/WEB-INF/admin/order.jsp</result>
        </action>
        <action name="updateOrder" class="bookstore.action.order.UpdateOrderAction">
            <result name="success">/WEB-INF/admin/order.jsp</result>
        </action>
        <action name="deleteOrder" class="bookstore.action.order.DeleteOrderAction">
            <result name="success">/WEB-INF/admin/order.jsp</result>
        </action>
        <action name="orderDetail" class="bookstore.action.order.ListOrderDetailAction">
            <result name="success" type="json">
                <param name="root">json</param>
                <param name="includeProperties">isbn, quantity, price</param>
            </result>
        </action>

        <!-- Order Item -->
        <action name="orderItem" class="bookstore.action.orderItem.ListOrderItemAction">
            <result name="success">/WEB-INF/admin/orderItem.jsp</result>
        </action>
        <action name="addOrderItem" class="bookstore.action.orderItem.AddOrderItemAction">
            <result name="success">/WEB-INF/admin/orderItem.jsp</result>
        </action>
        <action name="updateOrderItem" class="bookstore.action.orderItem.UpdateOrderItemAction">
            <result name="success">/WEB-INF/admin/orderItem.jsp</result>
        </action>
        <action name="deleteOrderItem" class="bookstore.action.orderItem.DeleteOrderItemAction">
            <result name="success">/WEB-INF/admin/orderItem.jsp</result>
        </action>

        <!--
        <action name="*">
            <result>/WEB-INF/{1}.jsp</result>
        </action>
        -->
    </package>
</struts>